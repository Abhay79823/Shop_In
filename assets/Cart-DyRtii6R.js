import{j as a,r as u}from"./index-CQ53g6uB.js";import{A as i}from"./api-CbkMMQiW.js";const p=({item:e,onCartChange:c})=>{const n=async()=>{var s,t;try{await i.delete(`/cart/${e.product._id}`),c()}catch(r){alert(((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to remove item")}},l=async()=>{var s,t;try{await i.put(`/cart/${e.product._id}`,{quantity:e.quantity+1}),c()}catch(r){alert(((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to update quantity")}},o=async()=>{var s,t;if(e.quantity>1)try{await i.put(`/cart/${e.product._id}`,{quantity:e.quantity-1}),c()}catch(r){alert(((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to update quantity")}else n()};return a.jsxs("div",{className:"cart-item",children:[a.jsx("img",{src:e.product.image,alt:e.product.name}),a.jsx("h3",{children:e.product.name}),a.jsxs("p",{children:["â‚¹",e.product.price]}),a.jsxs("div",{className:"quantity-controls",children:[a.jsx("button",{onClick:o,children:"-"}),a.jsx("span",{children:e.quantity}),a.jsx("button",{onClick:l,children:"+"})]}),a.jsx("button",{onClick:n,children:"Remove"})]})},x=()=>{const[e,c]=u.useState([]),[n,l]=u.useState(""),o=async()=>{var t,r;try{const d=await i.get("/cart");c(d.data)}catch(d){l(((r=(t=d.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to fetch cart")}};u.useEffect(()=>{o()},[]);const s=async()=>{var t,r;try{await i.delete("/cart"),o()}catch(d){alert(((r=(t=d.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to clear cart")}};return a.jsxs("div",{className:"cart",children:[a.jsx("h2",{children:"Your Cart"}),n&&a.jsx("p",{children:n}),e.length===0?a.jsx("p",{children:"Your cart is empty."}):a.jsxs("div",{children:[e.map(t=>a.jsx(p,{item:t,onCartChange:o},t._id)),a.jsx("button",{onClick:s,children:"Empty Cart"})]})]})};export{x as default};
