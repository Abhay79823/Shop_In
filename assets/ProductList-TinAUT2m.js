import{u as f,j as t,L as j,a as g,r as a}from"./index-DlMX8tA7.js";import{A as m}from"./api-OkkzIEia.js";const P=({product:s})=>{const d=f(),i=async()=>{var c,o;try{const r=await m.post("/cart",{productId:s._id,quantity:1});d(g(r.data)),alert("Added to cart!")}catch(r){alert(((o=(c=r.response)==null?void 0:c.data)==null?void 0:o.message)||"Failed to add to cart")}};return t.jsxs("div",{className:"product-item",children:[t.jsx("img",{src:s.image,alt:s.name}),t.jsx("h3",{children:s.name}),t.jsxs("p",{children:["â‚¹",s.price]}),t.jsx("button",{onClick:i,children:"Add to Cart"}),t.jsx(j,{to:`/product/${s._id}`,children:"View Details"})]})},C=()=>{const[s,d]=a.useState(""),[i,c]=a.useState([]),[o,r]=a.useState(!0),[l,p]=a.useState("");a.useEffect(()=>{(async()=>{var u,h;try{const n=await m.get("/products");c(n.data),r(!1)}catch(n){p(((h=(u=n.response)==null?void 0:u.data)==null?void 0:h.message)||"Error fetching products"),r(!1)}})()},[]);const x=i.filter(e=>e.name.toLowerCase().includes(s.toLowerCase()));return o?t.jsx("div",{children:"Loading..."}):l?t.jsxs("div",{children:["Error: ",l]}):t.jsxs("div",{className:"product-list",children:[t.jsx("input",{className:"product-search",type:"text",placeholder:"Search Products",value:s,onChange:e=>d(e.target.value)}),t.jsx("h3",{children:"List of Products"}),t.jsx("div",{className:"product-list-item",children:x.map(e=>t.jsx(P,{product:e},e._id))})]})};export{C as default};
